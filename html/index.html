<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Leyr. — Printare 3D Profesională | Figurine, Cercei, Bijuterii</title>
<link rel="icon" href="../imgages/logo3.ico">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../css/index.css">
<script>
// Language toggle function - MUST be defined in head before body loads
// This will be redefined in body script, but we need it here for onclick
window.toggleLanguage = function() {
  let currentLang = localStorage.getItem('language');
  if (!currentLang) {
    currentLang = 'ro';
    localStorage.setItem('language', 'ro');
  }
  const newLang = currentLang === 'ro' ? 'en' : 'ro';
  // Save language immediately
  localStorage.setItem('language', newLang);
  // Call setLanguage if available, otherwise reload
  if (typeof window.setLanguage === 'function') {
    window.setLanguage(newLang);
  } else {
    // Fallback: reload if setLanguage is not yet available
    location.reload();
  }
};

// Theme toggle function - MUST be defined in head before body loads
// This will be redefined in body script, but we need it here for onclick
window.toggleTheme = function() {
  console.log('=== toggleTheme called (head) ===');
  const currentTheme = localStorage.getItem('theme') || 'light';
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  // Save theme immediately
  localStorage.setItem('theme', newTheme);
  // Apply theme immediately without reload
  document.documentElement.setAttribute('data-theme', newTheme);
  
  // Update button icons if available - show opposite icon (the one you can switch to)
  const themeToggle = document.getElementById('themeToggle');
  if (themeToggle) {
    const sunIcon = themeToggle.querySelector('.sun-icon');
    const moonIcon = themeToggle.querySelector('.moon-icon');
    if (sunIcon && moonIcon) {
      if (newTheme === 'dark') {
        // Theme is dark, show sun icon (to switch to light)
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
        themeToggle.classList.remove('dark-active');
      } else {
        // Theme is light, show moon icon (to switch to dark)
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
        themeToggle.classList.add('dark-active');
      }
    }
  }
};
</script>
</head>
<body>
<script>
// Language translations - MUST be defined FIRST
const translations = {
  ro: {
    // Navigation
    navHome: 'Acasă',
    navProducts: 'Produse',
    navServices: 'Servicii',
    navAbout: 'Despre Noi',
    navContact: 'Contactează-ne',
    navCart: 'Coș',
    // Hero section
    heroTitle: 'Bun venit la Leyr.',
    heroSubtitle: 'Printare 3D profesională pentru figurine, cercei, bijuterii și multe altele — calitate, precizie și creativitate combinate.',
    heroBtnProducts: 'Vezi Produsele',
    heroBtnServices: 'Serviciile',
    requestQuote: 'Cerere Ofertă',
    aboutUs: 'Despre noi',
    // Stats
    statClients: 'Clienți Mulțumiți',
    statProjects: 'Proiecte Realizate',
    statMaterials: 'Materiale Disponibile',
    statSatisfaction: '% Satisfacție',
    // Features
    featuresTitle: 'De Ce Să Alegi Leyr?',
    feature1Title: 'Design Personalizat',
    feature1Desc: 'Creează-ți propriile modele 3D sau alege din colecția noastră de designuri unice pentru figurine, cercei și bijuterii.',
    feature2Title: 'Precizie Maximă',
    feature2Desc: 'Tehnologie avansată de printare 3D pentru detalii fine și rezoluție înaltă în fiecare proiect.',
    feature3Title: 'Materiale Premium',
    feature3Desc: 'O gamă largă de materiale de calitate: PLA, ABS, PETG, resină și multe altele pentru fiecare nevoie.',
    feature4Title: 'Livrare Rapidă',
    feature4Desc: 'Procesare rapidă și livrare eficientă pentru a-ți aduce produsele 3D cât mai repede.',
    feature5Title: 'Proiecte Personalizate',
    feature5Desc: 'Servicii complete de modelare 3D și printare pentru proiecte unice și personalizate.',
    feature6Title: 'Calitate Premium',
    feature6Desc: 'Standarde riguroase de control al calității pentru a asigura rezultate perfecte în fiecare printare.',
    // About
    aboutTitle: 'Despre Noi',
    aboutText: 'Leyr. este o firmă specializată în printare 3D profesională, oferind servicii complete de modelare și printare pentru figurine, cercei, bijuterii și multe alte produse personalizate. Misiunea noastră este să transformăm ideile tale în realitate prin tehnologie avansată și creativitate. De la concept la produs final, ne concentrăm pe calitate, precizie și satisfacerea clienților.',
    // Contact
    contactTitle: 'Contactează-ne',
    // WhatsApp
    whatsappTooltip: 'Produs Custom'
  },
  en: {
    // Navigation
    navHome: 'Home',
    navProducts: 'Our Products',
    navServices: 'Our Services',
    navAbout: 'About Us',
    navContact: 'Contact Us',
    navCart: 'Cart',
    // Hero section
    heroTitle: 'Welcome to Leyr.',
    heroSubtitle: 'Professional 3D printing for figurines, earrings, jewelry and much more — quality, precision and creativity combined.',
    heroBtnProducts: 'See Our Products',
    heroBtnServices: 'Our Services',
    requestQuote: 'Request Quote',
    aboutUs: 'About Us',
    // Stats
    statClients: 'Satisfied Clients',
    statProjects: 'Completed Projects',
    statMaterials: 'Available Materials',
    statSatisfaction: '% Satisfaction',
    // Features
    featuresTitle: 'Why Choose Leyr?',
    feature1Title: 'Custom Design',
    feature1Desc: 'Create your own 3D models or choose from our collection of unique designs for figurines, earrings and jewelry.',
    feature2Title: 'Maximum Precision',
    feature2Desc: 'Advanced 3D printing technology for fine details and high resolution in every project.',
    feature3Title: 'Premium Materials',
    feature3Desc: 'A wide range of quality materials: PLA, ABS, PETG, resin and many more for every need.',
    feature4Title: 'Fast Delivery',
    feature4Desc: 'Fast processing and efficient delivery to bring you 3D products as quickly as possible.',
    feature5Title: 'Custom Projects',
    feature5Desc: 'Complete 3D modeling and printing services for unique and custom projects.',
    feature6Title: 'Premium Quality',
    feature6Desc: 'Rigorous quality control standards to ensure perfect results in every print.',
    // About
    aboutTitle: 'About Us',
    aboutText: 'Leyr. is a company specialized in professional 3D printing, offering complete modeling and printing services for figurines, earrings, jewelry and many other custom products. Our mission is to transform your ideas into reality through advanced technology and creativity. From concept to final product, we focus on quality, precision and customer satisfaction.',
    // Contact
    contactTitle: 'Contact Us',
    // WhatsApp
    whatsappTooltip: 'Custom Product'
  }
};

// Make translations global immediately
window.translations = translations;

// Initialize language IMMEDIATELY - before any HTML loads
(function() {
  try {
    // Force language to Romanian always
    let savedLang = 'ro';
    localStorage.setItem('language', 'ro');
    
    // Define setLanguage function here if not already defined
    if (typeof window.setLanguage !== 'function') {
      window.setLanguage = function(lang) {
        // Prevent infinite recursion by checking if we're already executing
        if (window._settingLanguage) {
          console.warn('setLanguage already executing, skipping to prevent recursion');
          return;
        }
        window._settingLanguage = true;
        
        try {
          localStorage.setItem('language', lang);
          document.documentElement.setAttribute('lang', lang);
          
          const languageToggleText = document.getElementById('languageToggleText');
          if (languageToggleText) {
            // Show the opposite language (the one you can switch to)
            const oppositeLang = lang === 'ro' ? 'EN' : 'RO';
            languageToggleText.textContent = oppositeLang;
          }
          
          // Update page content if translations are available
          if (typeof window.translations !== 'undefined' && window.translations[lang]) {
            const t = window.translations[lang];
            document.querySelectorAll('[data-i18n]').forEach(el => {
              const key = el.getAttribute('data-i18n');
              if (t[key]) {
                el.textContent = t[key];
              }
            });
            
            document.title = 'Leyr. — Printare 3D Profesională | Figurine, Cercei, Bijuterii';
          }
        } catch (error) {
          // Silent error handling
        } finally {
          window._settingLanguage = false;
        }
      };
    }
    
    // Wait for DOM to be ready
    function applyLanguage() {
      if (typeof window.setLanguage === 'function') {
        window.setLanguage(savedLang);
      }
    }
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', applyLanguage);
    } else {
      applyLanguage();
    }
  } catch (error) {
    // Silent error handling
  }
})();

// Initialize counters
setTimeout(function() {
  var section = document.getElementById('statsSection');
  if (section) {
    var counters = section.querySelectorAll('.stat-number');
    for (var i = 0; i < counters.length; i++) {
      var target = parseInt(counters[i].getAttribute('data-target')) || 0;
      counters[i].textContent = target.toString();
    }
  }
}, 1000);

// SLIDER INITIALIZATION - Simple and working version
(function() {
  'use strict';
  
  function initSlider() {
    const slider = document.getElementById('heroSlider');
    
    if (!slider) {
      return;
    }
    
    const slides = slider.querySelectorAll('.slide');
    if (slides.length === 0) {
      return;
    }
    
    let currentSlide = 0;
    const intervalTime = 7000; // 7 seconds
    
    function showSlide(index) {
      // Remove active from all slides
      slides.forEach(function(slide) {
        slide.classList.remove('active');
      });
      
      // Add active to current slide
      if (slides[index]) {
        slides[index].classList.add('active');
        currentSlide = index;
      }
    }
    
    function nextSlide() {
      const next = (currentSlide + 1) % slides.length;
      showSlide(next);
    }
    
    // Initialize - show first slide
    showSlide(0);
    
    // Auto-advance slides
    setInterval(function() {
      nextSlide();
    }, intervalTime);
  }
  
  // Wait for DOM to be ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initSlider);
  } else {
    // DOM already loaded
    initSlider();
  }
  
  // Also try after a delay as fallback
  setTimeout(initSlider, 1000);
})();
</script>

<header>
  <div class="header-logo" onclick="window.location.href='index.html'">
    <img src="../imgages/logo1.png" alt="Leyr.">
  </div>
  <nav id="navMenu">
    <a href="index.html" data-i18n="navHome">Acasă</a>
    <a href="catalogue.html" data-i18n="navProducts">Produse</a>
    <a href="services.html" data-i18n="navServices">Servicii</a>
    <a href="#aboutUs" data-i18n="navAbout">Despre Noi</a>
    <a href="contact.html" data-i18n="navContact">Contactează-ne</a>
  </nav>
  <div class="header-actions">
    <a href="cart.html" class="header-icon-btn" id="cartToggle" aria-label="Coș">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="9" cy="21" r="1"></circle>
        <circle cx="20" cy="21" r="1"></circle>
        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
      </svg>
      <span class="cart-badge" id="cartBadge">0</span>
    </a>
    <button class="header-icon-btn" id="searchToggle" aria-label="Search">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
    </button>
    <a href="contact.html" class="header-cta-btn" data-i18n="requestQuote">Cerere Ofertă</a>
  </div>
  <button
    class="mobile-menu-toggle"
    id="mobileMenuToggle"
    aria-label="Meniu"
    onclick="document.getElementById('navMenu').classList.toggle('active')">
    <span></span>
    <span></span>
    <span></span>
  </button>
</header>

<section class="hero">
  <!-- Background Image Slider -->
  <div class="hero-slider" id="heroSlider">
    <div class="slider-wrapper">
      <div class="slide active">
        <img src="../imgages/Studio Session-039_1024px.jpg" alt="Leyr. Product">
        <div class="slide-content">
          <h1 class="slide-title">Transformă ideile în realitate</h1>
          <h2 class="slide-subtitle-large">cu printare 3D profesională</h2>
          <p class="slide-description">De la concept la produs final, oferim soluții complete de printare 3D pentru fiecare proiect</p>
          <a href="about-us.html" class="hero-cta-btn" data-i18n="aboutUs">Despre noi</a>
        </div>
      </div>
      <div class="slide">
        <img src="../imgages/Studio Session-046_1024px.jpg" alt="Leyr. Product">
        <div class="slide-content">
          <h1 class="slide-title">Designuri unice</h1>
          <h2 class="slide-subtitle-large">realizate cu precizie</h2>
          <p class="slide-description">Figurine, cercei, bijuterii și multe altele - fiecare produs este o operă de artă</p>
          <a href="catalogue.html" class="hero-cta-btn" data-i18n="heroBtnProducts">Vezi Produsele</a>
        </div>
      </div>
      <div class="slide">
        <img src="../imgages/Studio Session-045_1024px.jpg" alt="Leyr. Product">
        <div class="slide-content">
          <h1 class="slide-title">Tehnologie avansată</h1>
          <h2 class="slide-subtitle-large">pentru rezultate perfecte</h2>
          <p class="slide-description">Utilizăm cele mai moderne imprimante 3D și materiale premium pentru calitate superioară</p>
          <a href="services.html" class="hero-cta-btn" data-i18n="heroBtnServices">Serviciile</a>
        </div>
      </div>
      <div class="slide">
        <img src="../imgages/Studio Session-044_1024px.jpg" alt="Leyr. Product">
        <div class="slide-content">
          <h1 class="slide-title">Livrare rapidă</h1>
          <h2 class="slide-subtitle-large">în toată țara</h2>
          <p class="slide-description">Produsele tale ajung la tine rapid și sigur, oriunde te afli în țară</p>
          <a href="catalogue.html" class="hero-cta-btn" data-i18n="heroBtnProducts">Vezi Produsele</a>
        </div>
      </div>
    </div>
    <!-- Overlay for better text readability -->
    <div class="slider-overlay"></div>
    <!-- Mobile-only button for all slides -->
    <a href="catalogue.html" class="hero-cta-btn-mobile" data-i18n="heroBtnProducts">Vezi Produsele</a>
  </div>
  
</section>


<section class="featured-products-section">
  <h2 class="featured-products-title">Cele mai vândute</h2>
  <div class="featured-products-container">
    <a href="catalogue.html" class="featured-product-card">
      <div class="product-image-wrapper">
        <img src="../imgages/Studio Session-039_1024px.jpg" alt="Figurină 3D">
      </div>
      <h4>Figurine 3D</h4>
      <p class="product-price">299 RON</p>
    </a>
    <a href="catalogue.html" class="featured-product-card">
      <div class="product-image-wrapper">
        <img src="../imgages/Studio Session-046_1024px.jpg" alt="Figurină brad">
      </div>
      <h4>Figurină brad</h4>
      <p class="product-price">29.99 RON</p>
    </a>
    <a href="catalogue.html" class="featured-product-card">
      <div class="product-image-wrapper">
        <img src="../imgages/Studio Session-045_1024px.jpg" alt="Bijuterii 3D">
      </div>
      <h4>Bijuterii 3D</h4>
      <p class="product-price">199 RON</p>
    </a>
    <a href="catalogue.html" class="featured-product-card">
      <div class="product-image-wrapper">
        <img src="../imgages/Studio Session-044_1024px.jpg" alt="Obiecte Personalizate">
      </div>
      <h4>Obiecte Personalizate</h4>
      <p class="product-price">159 RON</p>
    </a>
  </div>
  <div class="featured-products-cta">
    <a href="catalogue.html" class="view-more-products-btn">Vezi și alte produse</a>
  </div>
</section>

<section class="about-us" id="aboutUs">
  <h1 data-i18n="aboutTitle">Despre Noi</h1>
  <p data-i18n="aboutText">
    Leyr. este o firmă specializată în printare 3D profesională, oferind servicii complete de modelare și printare pentru figurine, cercei, bijuterii și multe alte produse personalizate.
    Misiunea noastră este să transformăm ideile tale în realitate prin tehnologie avansată și creativitate. De la concept la produs final, ne concentrăm pe calitate, precizie și satisfacerea clienților.
  </p>
</section>

<section class="features-section" id="featuresSection">
  <div class="features-container">
    <div class="feature-card-large">
      <div class="feature-icon-large">
        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
          <path d="M2 17l10 5 10-5"></path>
          <path d="M2 12l10 5 10-5"></path>
        </svg>
      </div>
      <h3>Materiale Premium</h3>
      <p>O gamă largă de materiale de calitate: PLA, ABS, PETG, resină și multe altele pentru fiecare nevoie.</p>
    </div>
    <div class="feature-card-large">
      <div class="feature-icon-large">
        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
      </div>
      <h3>Produs Personalizat</h3>
      <p>Creează-ți propriile modele 3D sau alege din colecția noastră de designuri unice pentru figurine, cercei și bijuterii.</p>
    </div>
    <div class="feature-card-large">
      <div class="feature-icon-large">
        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
          <circle cx="12" cy="10" r="3"></circle>
        </svg>
      </div>
      <h3>Livrare în toată țara</h3>
      <p>Livrăm produsele 3D în toată țara, cu opțiuni rapide și sigure de transport.</p>
    </div>
  </div>
</section>

<section class="contact-section">
  <div class="contact-container">
    <h2 data-i18n="contactTitle">Contactează-ne</h2>
    <div class="contact-info">
      <a href="https://www.instagram.com/leyr.ro?igsh=MTk0bXoxMmxvdmFucg==" target="_blank" class="contact-link">
        <span class="contact-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="2" width="20" height="20" rx="5" stroke="currentColor" stroke-width="2" fill="none" />
            <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2" fill="none" />
            <circle cx="17.5" cy="6.5" r="1.5" fill="currentColor" />
          </svg>
        </span>
        <span>Instagram</span>
      </a>
      <a href="https://wa.me/40771728217" target="_blank" class="contact-link">
        <span class="contact-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
          </svg>
        </span>
        <span>WhatsApp</span>
      </a>
      <a href="https://www.facebook.com/share/1FnburaNfb/" target="_blank" class="contact-link">
        <span class="contact-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
        </span>
        <span>Facebook</span>
      </a>
      <a href="https://www.tiktok.com/@leyr.studio?_r=1&_t=ZN-91kh1RMaZC2" target="_blank" class="contact-link">
        <span class="contact-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
          </svg>
        </span>
        <span>TikTok</span>
      </a>
    </div>
  </div>
</section>

<!-- Floating WhatsApp Button for Custom Product -->
<a href="https://wa.me/40771728217?text=Bună!%20Aș%20dori%20să%20comand%20un%20produs%20custom." target="_blank" class="whatsapp-float" aria-label="Comandă produs custom pe WhatsApp">
  <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
  </svg>
  <span class="whatsapp-tooltip" data-i18n="whatsappTooltip">Produs Custom</span>
</a>

<footer>
  <p>&copy; 2025 Leyr. All rights reserved.</p>
</footer>

<script>

// Language toggle function - redefine to use setLanguage directly
window.toggleLanguage = function() {
  let currentLang = localStorage.getItem('language');
  if (!currentLang) {
    currentLang = 'ro';
    localStorage.setItem('language', 'ro');
  }
  const newLang = currentLang === 'ro' ? 'en' : 'ro';
  // Use window.setLanguage directly to avoid recursion
  if (typeof window.setLanguage === 'function') {
    // Store reference to avoid infinite recursion
    const setLangFunc = window.setLanguage;
    setLangFunc(newLang);
  } else {
    // Fallback: reload if setLanguage is not available
    localStorage.setItem('language', newLang);
    location.reload();
  }
};

// Translations are already defined at the top of the body script
// This is just a reference to avoid duplication

// If language was already set, update content now that translations are loaded
if (typeof window.setLanguage === 'function') {
  let currentLang = localStorage.getItem('language');
  if (!currentLang) {
    currentLang = 'ro';
    localStorage.setItem('language', 'ro');
  }
  window.setLanguage(currentLang);
}

// Make setLanguage global so it can be called from head
// Only define if not already defined (to avoid overwriting the one from body top)
// CRITICAL: This must be defined AFTER the body top script to avoid conflicts on Netlify
if (typeof window.setLanguage !== 'function') {
  // Store a reference to prevent recursion
  let setLanguageExecuting = false;
  
  window.setLanguage = function(lang) {
    // Prevent infinite recursion by checking if we're already executing
    if (setLanguageExecuting || window._settingLanguage) {
      return;
    }
    setLanguageExecuting = true;
    window._settingLanguage = true;
    
    try {
      localStorage.setItem('language', lang);
      document.documentElement.setAttribute('lang', lang);
      
      const languageToggleText = document.getElementById('languageToggleText');
      if (languageToggleText) {
        // Show the opposite language (the one you can switch to)
        const oppositeLang = lang === 'ro' ? 'EN' : 'RO';
        languageToggleText.textContent = oppositeLang;
      }
      
      // Only call updatePageContent if it exists and translations are available
      if (typeof updatePageContent === 'function' && typeof translations !== 'undefined') {
        updatePageContent(lang);
      }
    } catch (error) {
      // Silent error handling
    } finally {
      setLanguageExecuting = false;
      window._settingLanguage = false;
    }
  };
}

// Also define it locally for backwards compatibility
// IMPORTANT: This function should match the implementation from other pages (contact.html, services.html)
// CRITICAL: On Netlify, we must ensure no recursion occurs
// We implement it directly like on other pages to avoid recursion issues
function setLanguage(lang) {
  // Prevent infinite recursion by checking if we're already executing
  if (window._settingLanguage) {
    return;
  }
  window._settingLanguage = true;
  
  try {
    localStorage.setItem('language', lang);
    document.documentElement.setAttribute('lang', lang);
    
    const languageToggleText = document.getElementById('languageToggleText');
    if (languageToggleText) {
      // Show the opposite language (the one you can switch to)
      const oppositeLang = lang === 'ro' ? 'EN' : 'RO';
      languageToggleText.textContent = oppositeLang;
    }
    
    // Update page content if translations are available
    if (typeof updatePageContent === 'function' && typeof translations !== 'undefined') {
      updatePageContent(lang);
    }
  } catch (error) {
    // Silent error handling
  } finally {
    window._settingLanguage = false;
  }
}

function updatePageContent(lang) {
  if (typeof translations === 'undefined') {
    return;
  }
  const t = translations[lang];
  if (!t) {
    return;
  }
  
  // Update all elements with data-i18n attribute
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (t[key]) {
      el.textContent = t[key];
    }
  });
  
  // Update page title - always Romanian
  document.title = 'Leyr. — Printare 3D Profesională | Figurine, Cercei, Bijuterii';
}

// Theme toggle function - must be global
window.toggleTheme = function() {
  const currentTheme = localStorage.getItem('theme') || 'light';
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  setTheme(newTheme);
};

// Theme function
function setTheme(theme) {
  localStorage.setItem('theme', theme);
  document.documentElement.setAttribute('data-theme', theme);
  
  // Update toggle button - only icon, no label
  const themeToggle = document.getElementById('themeToggle');
  if (themeToggle) {
    const sunIcon = themeToggle.querySelector('.sun-icon');
    const moonIcon = themeToggle.querySelector('.moon-icon');
    
    if (sunIcon && moonIcon) {
      // Show the opposite icon (the one you can switch to)
      if (theme === 'dark') {
        // Theme is dark, show sun icon (to switch to light)
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
        themeToggle.classList.remove('dark-active');
      } else {
        // Theme is light, show moon icon (to switch to dark)
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
        themeToggle.classList.add('dark-active');
      }
    }
  }
}

// Mobile menu toggle
function initMobileMenu() {
  console.log('initMobileMenu() called');
  const mobileMenuToggle = document.getElementById('mobileMenuToggle');
  const navMenu = document.getElementById('navMenu');

  console.log('mobileMenuToggle =', mobileMenuToggle);
  console.log('navMenu =', navMenu);

  if (mobileMenuToggle && navMenu) {
    mobileMenuToggle.addEventListener('click', () => {
      console.log('mobileMenuToggle clicked (listener)');
      toggleMobileMenu();
    });
    
    // Close menu when clicking on a link (mobile)
    const navLinks = navMenu.querySelectorAll('a');
    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth <= 768) {
          navMenu.classList.remove('active');
        }
      });
    });
  }
}

// Fallback global handler for inline onclick (mobile) - MUST be global on window
window.toggleMobileMenu = function() {
  console.log('toggleMobileMenu() called');
  const navMenu = document.getElementById('navMenu');
  if (!navMenu) {
    console.log('toggleMobileMenu(): navMenu not found');
    return;
  }
  navMenu.classList.toggle('active');
  console.log('toggleMobileMenu(): navMenu.classList =', navMenu.className);
}


// Intersection Observer for scroll animations
const observerOptions = {
  threshold: 0.1,
  rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
    }
  });
}, observerOptions);

// Observe elements for animation
const elementsToAnimate = document.querySelectorAll('.hero-slider, .about-us, .stats-section, .features-section');
elementsToAnimate.forEach(el => observer.observe(el));

// Slow and Visible CountUp Animation - Numbers scroll from 0 to target
function animateCountUp(element, from, to, duration = 3, delay = 0, onStart, onEnd) {
  if (!element || isNaN(from) || isNaN(to)) {
    return;
  }

  // Format value function
  const formatValue = (value) => {
    return Math.round(value).toString();
  };

  // Set initial value
  element.textContent = formatValue(from);
  
  // Add animating class for CSS effects
  element.classList.add('animating');
  element.classList.remove('counting', 'animation-complete');

  let animationId = null;
  let startTime = null;
  let timeoutId = null;
  let durationTimeoutId = null;
  let lastDisplayedValue = from;

  // Easing function that slows down at the end (ease-out cubic)
  // This creates a smooth deceleration as it approaches the target
  function easeOutCubic(t) {
    return 1 - Math.pow(1 - t, 3);
  }

  // Function to update animation - called every frame
  function update(currentTime) {
    if (!startTime) {
      startTime = currentTime;
    }

    const elapsed = (currentTime - startTime) / 1000; // Convert to seconds
    const progress = Math.min(elapsed / duration, 1);

    // Apply easing - starts fast, slows down at the end
    const eased = easeOutCubic(progress);
    const currentValue = from + (to - from) * eased;
    const roundedValue = Math.round(currentValue);

    // Always update text to show every number change
    // This ensures we see: 0, 1, 2, 3, 4... up to the target
    if (roundedValue !== lastDisplayedValue || progress === 0) {
      element.textContent = formatValue(roundedValue);
      lastDisplayedValue = roundedValue;
      
      // Add counting class for visual pulse effect
      if (!element.classList.contains('counting')) {
        element.classList.add('counting');
      }
    }

    if (progress < 1) {
      // Continue animation - update every frame
      animationId = requestAnimationFrame(update);
    } else {
      // Animation complete - ensure final value is displayed
      element.textContent = formatValue(to);
      element.classList.remove('counting', 'animating');
      element.classList.add('animation-complete');
      
      if (typeof onEnd === 'function') {
        onEnd();
      }
    }
  }

  // Start animation after delay
  timeoutId = setTimeout(() => {
    if (typeof onStart === 'function') {
      onStart();
    }
    startTime = null;
    lastDisplayedValue = from;
    // Start animation immediately
    animationId = requestAnimationFrame(update);
  }, delay * 1000);

  // Call onEnd after duration (fallback)
  durationTimeoutId = setTimeout(() => {
    if (typeof onEnd === 'function') {
      onEnd();
    }
  }, delay * 1000 + duration * 1000);

  // Return cleanup function
  return () => {
    if (timeoutId) clearTimeout(timeoutId);
    if (durationTimeoutId) clearTimeout(durationTimeoutId);
    if (animationId) cancelAnimationFrame(animationId);
    element.classList.remove('animating', 'counting');
  };
}

// Initialize counters when DOM is ready - Set values directly without animation
function initCounters() {
  const statsSection = document.getElementById('statsSection');
  
  if (!statsSection) {
    return;
  }
  
  // Get all stat numbers and set values directly
  const counters = statsSection.querySelectorAll('.stat-number');
  
  counters.forEach((counter) => {
    const target = parseInt(counter.getAttribute('data-target')) || 0;
    counter.textContent = target.toString();
  });
}

// Run when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', function() {
    initCounters();
  });
} else {
  initCounters();
}

// Also try after a delay as fallback
setTimeout(function() {
  const section = document.getElementById('statsSection');
  if (section) {
    const counters = section.querySelectorAll('.stat-number');
    counters.forEach(function(counter) {
      const target = parseInt(counter.getAttribute('data-target')) || 0;
      counter.textContent = target.toString();
    });
  }
}, 2000);

// Smooth scroll for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      target.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }
  });
});

// Update cart badge count
function updateCartBadge() {
  const cartBadge = document.getElementById('cartBadge');
  if (!cartBadge) return;
  
  try {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const totalItems = cart.reduce((sum, item) => sum + (item.quantity || 1), 0);
    
    if (totalItems > 0) {
      cartBadge.textContent = totalItems;
      cartBadge.style.display = 'flex';
    } else {
      cartBadge.style.display = 'none';
    }
  } catch (error) {
    cartBadge.style.display = 'none';
  }
}

// Initialize everything when DOM is ready
function initAll() {
  console.log('initAll() called');
  // Initialize theme
  const savedTheme = localStorage.getItem('theme') || 'light';
  setTheme(savedTheme);
  
  // Force language to Romanian always
  let savedLang = 'ro';
  localStorage.setItem('language', 'ro');
  if (typeof window.setLanguage === 'function') {
    window.setLanguage('ro');
  }
  
  // Initialize mobile menu
  initMobileMenu();
  
  // Initialize cart badge
  updateCartBadge();
  
  // Listen for cart changes
  window.addEventListener('storage', function(e) {
    if (e.key === 'cart') {
      updateCartBadge();
    }
  });
  
  // Also check cart on page focus (for same-tab updates)
  window.addEventListener('focus', updateCartBadge);
  
  // Initialize counters
  if (typeof initCounters === 'function') {
    initCounters();
  }
  
  // Initialize header scroll effect
  initHeaderScroll();
  
  // Scroll animations, counter animation, parallax and smooth scroll are auto-initialized above
  
  // Listen for storage changes to sync language and theme across all open pages
  window.addEventListener('storage', function(e) {
    if (e.key === 'language') {
      const newLang = e.newValue || 'ro';
      if (typeof window.setLanguage === 'function') {
        window.setLanguage(newLang);
      }
    }
    if (e.key === 'theme') {
      const newTheme = e.newValue || 'light';
      if (typeof setTheme === 'function') {
        setTheme(newTheme);
      }
    }
    if (e.key === 'cart') {
      updateCartBadge();
    }
  });
}

// Header stays transparent always - no scroll effect needed
function initHeaderScroll() {
  const header = document.querySelector('header');
  if (!header) return;
  
  // Always keep header transparent - remove scrolled class
  header.classList.remove('scrolled');
}

// Header stays transparent always - no scroll effect
(function() {
  function ensureHeaderTransparent() {
    const header = document.querySelector('header');
    if (header) {
      // Always remove scrolled class to keep header transparent
      header.classList.remove('scrolled');
      // Force transparent background
      header.style.background = 'transparent';
      header.style.backgroundColor = 'transparent';
      header.style.boxShadow = 'none';
    } else {
      // If header not found yet, try again after a short delay
      setTimeout(ensureHeaderTransparent, 50);
    }
  }
  
  // Ensure header is transparent immediately
  ensureHeaderTransparent();
  
  // Also ensure when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', ensureHeaderTransparent);
  }
  
  // Also ensure on window load
  window.addEventListener('load', ensureHeaderTransparent);
})();

// Initialize on DOM ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initAll);
} else {
  initAll();
}

// Initialize language on page load - AFTER all functions are defined
// This is a backup in case the head script didn't work
try {
  let savedLang = localStorage.getItem('language');
  if (!savedLang) {
    savedLang = 'ro';
    localStorage.setItem('language', 'ro');
  }
  if (typeof window.setLanguage === 'function') {
    window.setLanguage(savedLang);
  }
} catch (error) {
  // Silent error handling
}

</script>

