<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Leyr. â€” Printare 3D ProfesionalÄƒ | Figurine, Cercei, Bijuterii</title>
<link rel="icon" href="../imgages/logo3.ico">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../css/index.css">
<script>
// Language toggle function - MUST be defined in head before body loads
// This will be redefined in body script, but we need it here for onclick
window.toggleLanguage = function() {
  let currentLang = localStorage.getItem('language');
  if (!currentLang) {
    currentLang = 'ro';
    localStorage.setItem('language', 'ro');
  }
  const newLang = currentLang === 'ro' ? 'en' : 'ro';
  // Save language immediately
  localStorage.setItem('language', newLang);
  // Call setLanguage if available, otherwise reload
  if (typeof window.setLanguage === 'function') {
    window.setLanguage(newLang);
  } else {
    // Fallback: reload if setLanguage is not yet available
    location.reload();
  }
};

// Theme toggle function - MUST be defined in head before body loads
// This will be redefined in body script, but we need it here for onclick
window.toggleTheme = function() {
  console.log('=== toggleTheme called (head) ===');
  const currentTheme = localStorage.getItem('theme') || 'light';
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  // Save theme immediately
  localStorage.setItem('theme', newTheme);
  // Apply theme immediately without reload
  document.documentElement.setAttribute('data-theme', newTheme);
  
  // Update button icons if available - show opposite icon (the one you can switch to)
  const themeToggle = document.getElementById('themeToggle');
  if (themeToggle) {
    const sunIcon = themeToggle.querySelector('.sun-icon');
    const moonIcon = themeToggle.querySelector('.moon-icon');
    if (sunIcon && moonIcon) {
      if (newTheme === 'dark') {
        // Theme is dark, show sun icon (to switch to light)
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
        themeToggle.classList.remove('dark-active');
      } else {
        // Theme is light, show moon icon (to switch to dark)
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
        themeToggle.classList.add('dark-active');
      }
    }
  }
};
</script>
</head>
<body>
<script>
// TEST: First line of body script
console.log('=== BODY TOP SCRIPT STARTED ===');
// Language translations - MUST be defined FIRST
const translations = {
  ro: {
    // Navigation
    navHome: 'AcasÄƒ',
    navProducts: 'Produsele Noastre',
    navServices: 'Serviciile Noastre',
    navContact: 'ContacteazÄƒ-ne',
    navCart: 'CoÈ™',
    // Hero section
    heroTitle: 'Bun venit la Leyr.',
    heroSubtitle: 'Printare 3D profesionalÄƒ pentru figurine, cercei, bijuterii È™i multe altele â€” calitate, precizie È™i creativitate combinate.',
    heroBtnProducts: 'Produsele Noastre',
    heroBtnServices: 'Serviciile Noastre',
    // Stats
    statClients: 'ClienÈ›i MulÈ›umiÈ›i',
    statProjects: 'Proiecte Realizate',
    statMaterials: 'Materiale Disponibile',
    statSatisfaction: '% SatisfacÈ›ie',
    // Features
    featuresTitle: 'De Ce SÄƒ Alegi Leyr?',
    feature1Title: 'Design Personalizat',
    feature1Desc: 'CreeazÄƒ-È›i propriile modele 3D sau alege din colecÈ›ia noastrÄƒ de designuri unice pentru figurine, cercei È™i bijuterii.',
    feature2Title: 'Precizie MaximÄƒ',
    feature2Desc: 'Tehnologie avansatÄƒ de printare 3D pentru detalii fine È™i rezoluÈ›ie Ã®naltÄƒ Ã®n fiecare proiect.',
    feature3Title: 'Materiale Premium',
    feature3Desc: 'O gamÄƒ largÄƒ de materiale de calitate: PLA, ABS, PETG, resinÄƒ È™i multe altele pentru fiecare nevoie.',
    feature4Title: 'Livrare RapidÄƒ',
    feature4Desc: 'Procesare rapidÄƒ È™i livrare eficientÄƒ pentru a-È›i aduce produsele 3D cÃ¢t mai repede.',
    feature5Title: 'Proiecte Personalizate',
    feature5Desc: 'Servicii complete de modelare 3D È™i printare pentru proiecte unice È™i personalizate.',
    feature6Title: 'Calitate Premium',
    feature6Desc: 'Standarde riguroase de control al calitÄƒÈ›ii pentru a asigura rezultate perfecte Ã®n fiecare printare.',
    // About
    aboutTitle: 'Despre Noi',
    aboutText: 'Leyr. este o firmÄƒ specializatÄƒ Ã®n printare 3D profesionalÄƒ, oferind servicii complete de modelare È™i printare pentru figurine, cercei, bijuterii È™i multe alte produse personalizate. Misiunea noastrÄƒ este sÄƒ transformÄƒm ideile tale Ã®n realitate prin tehnologie avansatÄƒ È™i creativitate. De la concept la produs final, ne concentrÄƒm pe calitate, precizie È™i satisfacerea clienÈ›ilor.',
    // Contact
    contactTitle: 'ContacteazÄƒ-ne',
    // WhatsApp
    whatsappTooltip: 'Produs Custom'
  },
  en: {
    // Navigation
    navHome: 'Home',
    navProducts: 'Our Products',
    navServices: 'Our Services',
    navContact: 'Contact Us',
    navCart: 'Cart',
    // Hero section
    heroTitle: 'Welcome to Leyr.',
    heroSubtitle: 'Professional 3D printing for figurines, earrings, jewelry and much more â€” quality, precision and creativity combined.',
    heroBtnProducts: 'Our Products',
    heroBtnServices: 'Our Services',
    // Stats
    statClients: 'Satisfied Clients',
    statProjects: 'Completed Projects',
    statMaterials: 'Available Materials',
    statSatisfaction: '% Satisfaction',
    // Features
    featuresTitle: 'Why Choose Leyr?',
    feature1Title: 'Custom Design',
    feature1Desc: 'Create your own 3D models or choose from our collection of unique designs for figurines, earrings and jewelry.',
    feature2Title: 'Maximum Precision',
    feature2Desc: 'Advanced 3D printing technology for fine details and high resolution in every project.',
    feature3Title: 'Premium Materials',
    feature3Desc: 'A wide range of quality materials: PLA, ABS, PETG, resin and many more for every need.',
    feature4Title: 'Fast Delivery',
    feature4Desc: 'Fast processing and efficient delivery to bring you 3D products as quickly as possible.',
    feature5Title: 'Custom Projects',
    feature5Desc: 'Complete 3D modeling and printing services for unique and custom projects.',
    feature6Title: 'Premium Quality',
    feature6Desc: 'Rigorous quality control standards to ensure perfect results in every print.',
    // About
    aboutTitle: 'About Us',
    aboutText: 'Leyr. is a company specialized in professional 3D printing, offering complete modeling and printing services for figurines, earrings, jewelry and many other custom products. Our mission is to transform your ideas into reality through advanced technology and creativity. From concept to final product, we focus on quality, precision and customer satisfaction.',
    // Contact
    contactTitle: 'Contact Us',
    // WhatsApp
    whatsappTooltip: 'Custom Product'
  }
};

// Make translations global immediately
window.translations = translations;

// Initialize language IMMEDIATELY - before any HTML loads
(function() {
  try {
    // Set default language to Romanian if not set
    let savedLang = localStorage.getItem('language');
    if (!savedLang) {
      savedLang = 'ro';
      localStorage.setItem('language', 'ro');
    }
    
    // Define setLanguage function here if not already defined
    if (typeof window.setLanguage !== 'function') {
      window.setLanguage = function(lang) {
        localStorage.setItem('language', lang);
        document.documentElement.setAttribute('lang', lang);
        
        const languageToggleText = document.getElementById('languageToggleText');
        if (languageToggleText) {
          // Show the opposite language (the one you can switch to)
          const oppositeLang = lang === 'ro' ? 'EN' : 'RO';
          languageToggleText.textContent = oppositeLang;
        }
        
        // Update page content if translations are available
        if (typeof window.translations !== 'undefined' && window.translations[lang]) {
          const t = window.translations[lang];
          document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (t[key]) {
              el.textContent = t[key];
            }
          });
          
          if (lang === 'en') {
            document.title = 'Leyr. â€” Professional 3D Printing | Figurines, Earrings, Jewelry';
          } else {
            document.title = 'Leyr. â€” Printare 3D ProfesionalÄƒ | Figurine, Cercei, Bijuterii';
          }
        }
      };
    }
    
    // Wait for DOM to be ready
    function applyLanguage() {
      if (typeof window.setLanguage === 'function') {
        window.setLanguage(savedLang);
      }
    }
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', applyLanguage);
    } else {
      applyLanguage();
    }
  } catch (error) {
    console.error('ERROR in body top script:', error);
  }
})();
console.log('=== BODY TOP SCRIPT ENDED ===');

// TEST: Try to initialize counters here
console.log('=== TESTING COUNTERS IN BODY TOP SCRIPT ===');
setTimeout(function() {
  console.log('=== TIMEOUT IN BODY TOP SCRIPT ===');
  var section = document.getElementById('statsSection');
  console.log('Section element:', section);
  if (section) {
    var counters = section.querySelectorAll('.stat-number');
    console.log('Found counters:', counters.length);
    for (var i = 0; i < counters.length; i++) {
      var target = parseInt(counters[i].getAttribute('data-target')) || 0;
      counters[i].textContent = target.toString();
      console.log('Counter', (i+1), 'set to:', target);
    }
  } else {
    console.error('Section NOT found!');
  }
}, 1000);
</script>

<header>
  <img src="../imgages/logo1.png" alt="Leyr." onclick="window.location.href='index.html'">
  <div class="header-controls">
    <button class="toggle-btn language-toggle" id="languageToggle" onclick="toggleLanguage()" aria-label="Language">
      <span class="toggle-icon" id="languageToggleText">EN</span>
    </button>
    <button class="toggle-btn theme-toggle" id="themeToggle" onclick="toggleTheme()" aria-label="Toggle theme">
      <span class="toggle-icon">
        <svg class="sun-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg class="moon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
      </span>
    </button>
  </div>
  <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
    <span></span>
    <span></span>
    <span></span>
  </button>
  <nav id="navMenu">
    <a href="index.html" data-i18n="navHome">AcasÄƒ</a>
    <a href="catalogue.html" data-i18n="navProducts">Produsele Noastre</a>
    <a href="services.html" data-i18n="navServices">Serviciile Noastre</a>
    <a href="contact.html" data-i18n="navContact">ContacteazÄƒ-ne</a>
    <a href="cart.html" data-i18n="navCart">CoÈ™</a>
  </nav>
</header>

<section class="hero">
  <div class="hero-particles">
    <div class="particle particle-1"></div>
    <div class="particle particle-2"></div>
    <div class="particle particle-3"></div>
    <div class="particle particle-4"></div>
    <div class="particle particle-5"></div>
    <div class="particle particle-6"></div>
    <div class="particle particle-7"></div>
    <div class="particle particle-8"></div>
  </div>
  <h1 data-i18n="heroTitle">Bun venit la Leyr.</h1>
  <p data-i18n="heroSubtitle">Printare 3D profesionalÄƒ pentru figurine, cercei, bijuterii È™i multe altele â€” calitate, precizie È™i creativitate combinate.</p>
  <div class="hero-buttons">
    <button onclick="window.location.href='catalogue.html'" data-i18n="heroBtnProducts">Produsele Noastre</button>
    <button onclick="window.location.href='services.html'" data-i18n="heroBtnServices">Serviciile Noastre</button>
  </div>
</section>

<section class="hero-image" id="heroImage">
  <img src="../imgages/3dworldproduct.jpg" alt="Leyr. Product" onerror="this.style.display='none'; if(this.nextElementSibling) this.nextElementSibling.style.display='block';">
  <div style="display:none; text-align:center; padding:40px; background:#fff; border-radius:14px; color:#666;">Image coming soon</div>
</section>

<section class="stats-section" id="statsSection">
  <div class="stats-grid">
    <div class="stat-item">
      <span class="stat-number" data-target="500">500</span>
      <div class="stat-label" data-i18n="statClients">ClienÈ›i MulÈ›umiÈ›i</div>
    </div>
    <div class="stat-item">
      <span class="stat-number" data-target="500">500</span>
      <div class="stat-label" data-i18n="statProjects">Proiecte Realizate</div>
    </div>
    <div class="stat-item">
      <span class="stat-number" data-target="25">25</span>
      <div class="stat-label" data-i18n="statMaterials">Materiale Disponibile</div>
    </div>
    <div class="stat-item">
      <span class="stat-number" data-target="98">98</span>
      <div class="stat-label" data-i18n="statSatisfaction">% SatisfacÈ›ie</div>
    </div>
  </div>
</section>

<section class="features-section" id="featuresSection">
  <h2 data-i18n="featuresTitle">De Ce SÄƒ Alegi Leyr?</h2>
  <div class="features-grid">
    <div class="feature-card">
      <span class="feature-icon">ðŸŽ¨</span>
      <h3 data-i18n="feature1Title">Design Personalizat</h3>
      <p data-i18n="feature1Desc">CreeazÄƒ-È›i propriile modele 3D sau alege din colecÈ›ia noastrÄƒ de designuri unice pentru figurine, cercei È™i bijuterii.</p>
    </div>
    <div class="feature-card">
      <span class="feature-icon">ðŸ”§</span>
      <h3 data-i18n="feature2Title">Precizie MaximÄƒ</h3>
      <p data-i18n="feature2Desc">Tehnologie avansatÄƒ de printare 3D pentru detalii fine È™i rezoluÈ›ie Ã®naltÄƒ Ã®n fiecare proiect.</p>
    </div>
    <div class="feature-card">
      <span class="feature-icon">ðŸ’Ž</span>
      <h3 data-i18n="feature3Title">Materiale Premium</h3>
      <p data-i18n="feature3Desc">O gamÄƒ largÄƒ de materiale de calitate: PLA, ABS, PETG, resinÄƒ È™i multe altele pentru fiecare nevoie.</p>
    </div>
    <div class="feature-card">
      <span class="feature-icon">âš¡</span>
      <h3 data-i18n="feature4Title">Livrare RapidÄƒ</h3>
      <p data-i18n="feature4Desc">Procesare rapidÄƒ È™i livrare eficientÄƒ pentru a-È›i aduce produsele 3D cÃ¢t mai repede.</p>
    </div>
    <div class="feature-card">
      <span class="feature-icon">ðŸŽ¯</span>
      <h3 data-i18n="feature5Title">Proiecte Personalizate</h3>
      <p data-i18n="feature5Desc">Servicii complete de modelare 3D È™i printare pentru proiecte unice È™i personalizate.</p>
    </div>
    <div class="feature-card">
      <span class="feature-icon">âœ¨</span>
      <h3 data-i18n="feature6Title">Calitate Premium</h3>
      <p data-i18n="feature6Desc">Standarde riguroase de control al calitÄƒÈ›ii pentru a asigura rezultate perfecte Ã®n fiecare printare.</p>
    </div>
  </div>
</section>

<section class="about-us" id="aboutUs">
  <h1 data-i18n="aboutTitle">Despre Noi</h1>
  <p data-i18n="aboutText">
    Leyr. este o firmÄƒ specializatÄƒ Ã®n printare 3D profesionalÄƒ, oferind servicii complete de modelare È™i printare pentru figurine, cercei, bijuterii È™i multe alte produse personalizate.
    Misiunea noastrÄƒ este sÄƒ transformÄƒm ideile tale Ã®n realitate prin tehnologie avansatÄƒ È™i creativitate. De la concept la produs final, ne concentrÄƒm pe calitate, precizie È™i satisfacerea clienÈ›ilor.
  </p>
</section>

<section class="contact-section">
  <div class="contact-container">
    <h2 data-i18n="contactTitle">ContacteazÄƒ-ne</h2>
    <div class="contact-info">
      <a href="https://instagram.com/leyr" target="_blank" class="contact-link">
        <span class="contact-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="2" width="20" height="20" rx="5" stroke="currentColor" stroke-width="2" fill="none" />
            <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2" fill="none" />
            <circle cx="17.5" cy="6.5" r="1.5" fill="currentColor" />
          </svg>
        </span>
        <span>Instagram</span>
      </a>
      <a href="https://wa.me/40712345678" target="_blank" class="contact-link">
        <span class="contact-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
          </svg>
        </span>
        <span>WhatsApp</span>
      </a>
      <a href="https://facebook.com/leyr" target="_blank" class="contact-link">
        <span class="contact-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
        </span>
        <span>Facebook</span>
      </a>
      <a href="https://tiktok.com/@leyr" target="_blank" class="contact-link">
        <span class="contact-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
          </svg>
        </span>
        <span>TikTok</span>
      </a>
    </div>
  </div>
</section>

<!-- Floating WhatsApp Button for Custom Product -->
<a href="https://wa.me/40712345678?text=BunÄƒ!%20AÈ™%20dori%20sÄƒ%20comand%20un%20produs%20custom." target="_blank" class="whatsapp-float" aria-label="ComandÄƒ produs custom pe WhatsApp">
  <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
  </svg>
  <span class="whatsapp-tooltip" data-i18n="whatsappTooltip">Produs Custom</span>
</a>

<footer>
  <p>&copy; 2025 Leyr. All rights reserved.</p>
</footer>

<script>
// TEST: First line of script - MUST APPEAR FIRST
console.log('=== SCRIPT TAG REACHED ===');
console.log('=== BEFORE IIFE ===');
(function() {
  'use strict';
  console.log('=== SCRIPT TAG OPENED ===');
  try {
    console.log('=== BODY SCRIPT STARTED ===');
    console.log('Script is executing...');
  } catch(e) {
    console.error('ERROR at start of script:', e);
  }
})();
console.log('=== AFTER IIFE ===');

// Language toggle function - redefine to use setLanguage directly
window.toggleLanguage = function() {
  let currentLang = localStorage.getItem('language');
  if (!currentLang) {
    currentLang = 'ro';
    localStorage.setItem('language', 'ro');
  }
  const newLang = currentLang === 'ro' ? 'en' : 'ro';
  // Use window.setLanguage directly to avoid recursion
  if (typeof window.setLanguage === 'function') {
    // Store reference to avoid infinite recursion
    const setLangFunc = window.setLanguage;
    setLangFunc(newLang);
  } else {
    // Fallback: reload if setLanguage is not available
    localStorage.setItem('language', newLang);
    location.reload();
  }
};

// Translations are already defined at the top of the body script
// This is just a reference to avoid duplication

// If language was already set, update content now that translations are loaded
if (typeof window.setLanguage === 'function') {
  let currentLang = localStorage.getItem('language');
  if (!currentLang) {
    currentLang = 'ro';
    localStorage.setItem('language', 'ro');
  }
  window.setLanguage(currentLang);
}

// Make setLanguage global so it can be called from head
// Only define if not already defined (to avoid overwriting the one from body top)
if (typeof window.setLanguage !== 'function') {
  window.setLanguage = function(lang) {
    localStorage.setItem('language', lang);
    document.documentElement.setAttribute('lang', lang);
    
    const languageToggleText = document.getElementById('languageToggleText');
    if (languageToggleText) {
      languageToggleText.textContent = lang.toUpperCase();
    }
    
    if (typeof updatePageContent === 'function') {
      updatePageContent(lang);
    }
  };
}

// Also define it locally for backwards compatibility (but avoid recursion)
// IMPORTANT: This function should only be used if window.setLanguage is not available
// Otherwise, always use window.setLanguage directly to avoid infinite recursion
function setLanguage(lang) {
  // Only use this if window.setLanguage is not available
  if (typeof window.setLanguage !== 'function') {
    // Fallback: reload if window.setLanguage is not available
    localStorage.setItem('language', lang);
    document.documentElement.setAttribute('lang', lang);
    location.reload();
    return;
  }
  // If window.setLanguage exists, use it directly (no recursion)
  window.setLanguage(lang);
}

function updatePageContent(lang) {
  if (typeof translations === 'undefined') {
    console.error('ERROR: translations is not defined!');
    return;
  }
  const t = translations[lang];
  if (!t) {
    console.error('ERROR: translations[', lang, '] is not defined!');
    return;
  }
  
  // Update all elements with data-i18n attribute
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (t[key]) {
      el.textContent = t[key];
    }
  });
  
  // Update page title
  if (lang === 'en') {
    document.title = 'Leyr. â€” Professional 3D Printing | Figurines, Earrings, Jewelry';
  } else {
    document.title = 'Leyr. â€” Printare 3D ProfesionalÄƒ | Figurine, Cercei, Bijuterii';
  }
}

// Theme toggle function - must be global
window.toggleTheme = function() {
  console.log('=== toggleTheme called ===');
  const currentTheme = localStorage.getItem('theme') || 'light';
  console.log('Current theme:', currentTheme);
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  console.log('Switching to theme:', newTheme);
  setTheme(newTheme);
};

// Theme function
function setTheme(theme) {
  console.log('=== setTheme called with:', theme, '===');
  localStorage.setItem('theme', theme);
  console.log('Theme saved to localStorage:', theme);
  
  document.documentElement.setAttribute('data-theme', theme);
  console.log('data-theme attribute set on html element:', document.documentElement.getAttribute('data-theme'));
  
  // Update toggle button - only icon, no label
  const themeToggle = document.getElementById('themeToggle');
  console.log('Looking for themeToggle element...');
  if (themeToggle) {
    console.log('Found themeToggle element:', themeToggle);
    const sunIcon = themeToggle.querySelector('.sun-icon');
    const moonIcon = themeToggle.querySelector('.moon-icon');
    console.log('Sun icon found:', !!sunIcon);
    console.log('Moon icon found:', !!moonIcon);
    
    if (sunIcon && moonIcon) {
      // Show the opposite icon (the one you can switch to)
      if (theme === 'dark') {
        // Theme is dark, show sun icon (to switch to light)
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
        themeToggle.classList.remove('dark-active');
        console.log('Theme set to dark - showing sun icon (can switch to light)');
      } else {
        // Theme is light, show moon icon (to switch to dark)
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
        themeToggle.classList.add('dark-active');
        console.log('Theme set to light - showing moon icon (can switch to dark)');
      }
    } else {
      console.error('Sun or moon icon NOT found!');
      console.log('Available children:', Array.from(themeToggle.children).map(c => c.tagName + (c.className ? '.' + c.className : '')));
    }
  } else {
    console.error('themeToggle element NOT found!');
  }
  console.log('=== setTheme finished ===');
}

// Mobile menu toggle
function initMobileMenu() {
  const mobileMenuToggle = document.getElementById('mobileMenuToggle');
  const navMenu = document.getElementById('navMenu');

  if (mobileMenuToggle && navMenu) {
    mobileMenuToggle.addEventListener('click', () => {
      navMenu.classList.toggle('active');
    });
    
    // Close menu when clicking on a link (mobile)
    const navLinks = navMenu.querySelectorAll('a');
    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth <= 768) {
          navMenu.classList.remove('active');
        }
      });
    });
  }
}

// TEST: Check if script is running
try {
  console.log('=== COUNTER SCRIPT SECTION STARTED ===');
} catch(e) {
  console.error('ERROR in counter section:', e);
}

// Intersection Observer for scroll animations
const observerOptions = {
  threshold: 0.1,
  rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
    }
  });
}, observerOptions);

// Observe elements for animation
const elementsToAnimate = document.querySelectorAll('.hero-image, .about-us, .stats-section, .features-section');
elementsToAnimate.forEach(el => observer.observe(el));

// Slow and Visible CountUp Animation - Numbers scroll from 0 to target
function animateCountUp(element, from, to, duration = 3, delay = 0, onStart, onEnd) {
  console.log('animateCountUp called:', element, 'from:', from, 'to:', to, 'duration:', duration);
  if (!element || isNaN(from) || isNaN(to)) {
    console.error('animateCountUp: Invalid parameters!');
    return;
  }

  // Format value function
  const formatValue = (value) => {
    return Math.round(value).toString();
  };

  // Set initial value
  element.textContent = formatValue(from);
  
  // Add animating class for CSS effects
  element.classList.add('animating');
  element.classList.remove('counting', 'animation-complete');

  let animationId = null;
  let startTime = null;
  let timeoutId = null;
  let durationTimeoutId = null;
  let lastDisplayedValue = from;

  // Easing function that slows down at the end (ease-out cubic)
  // This creates a smooth deceleration as it approaches the target
  function easeOutCubic(t) {
    return 1 - Math.pow(1 - t, 3);
  }

  // Function to update animation - called every frame
  function update(currentTime) {
    if (!startTime) {
      startTime = currentTime;
    }

    const elapsed = (currentTime - startTime) / 1000; // Convert to seconds
    const progress = Math.min(elapsed / duration, 1);

    // Apply easing - starts fast, slows down at the end
    const eased = easeOutCubic(progress);
    const currentValue = from + (to - from) * eased;
    const roundedValue = Math.round(currentValue);

    // Always update text to show every number change
    // This ensures we see: 0, 1, 2, 3, 4... up to the target
    if (roundedValue !== lastDisplayedValue || progress === 0) {
      element.textContent = formatValue(roundedValue);
      lastDisplayedValue = roundedValue;
      
      // Add counting class for visual pulse effect
      if (!element.classList.contains('counting')) {
        element.classList.add('counting');
      }
    }

    if (progress < 1) {
      // Continue animation - update every frame
      animationId = requestAnimationFrame(update);
    } else {
      // Animation complete - ensure final value is displayed
      element.textContent = formatValue(to);
      element.classList.remove('counting', 'animating');
      element.classList.add('animation-complete');
      
      if (typeof onEnd === 'function') {
        onEnd();
      }
    }
  }

  // Start animation after delay
  timeoutId = setTimeout(() => {
    if (typeof onStart === 'function') {
      onStart();
    }
    startTime = null;
    lastDisplayedValue = from;
    // Start animation immediately
    animationId = requestAnimationFrame(update);
  }, delay * 1000);

  // Call onEnd after duration (fallback)
  durationTimeoutId = setTimeout(() => {
    if (typeof onEnd === 'function') {
      onEnd();
    }
  }, delay * 1000 + duration * 1000);

  // Return cleanup function
  return () => {
    if (timeoutId) clearTimeout(timeoutId);
    if (durationTimeoutId) clearTimeout(durationTimeoutId);
    if (animationId) cancelAnimationFrame(animationId);
    element.classList.remove('animating', 'counting');
  };
}

// Initialize counters when DOM is ready - Set values directly without animation
function initCounters() {
  console.log('=== initCounters() CALLED ===');
  const statsSection = document.getElementById('statsSection');
  console.log('statsSection element:', statsSection);
  
  if (!statsSection) {
    console.error('ERROR: statsSection NOT FOUND!');
    return;
  }
  
  console.log('Found statsSection, setting values directly...');
  
  // Get all stat numbers and set values directly
  const counters = statsSection.querySelectorAll('.stat-number');
  console.log('Found', counters.length, 'counters');
  
  counters.forEach((counter, index) => {
    const target = parseInt(counter.getAttribute('data-target')) || 0;
    counter.textContent = target.toString();
    console.log(`Counter ${index + 1}: Set to ${target}`);
  });
}

// Run when DOM is ready
console.log('=== SETTING UP COUNTER INITIALIZATION ===');
console.log('Document readyState:', document.readyState);

if (document.readyState === 'loading') {
  console.log('DOM loading, waiting for DOMContentLoaded...');
  document.addEventListener('DOMContentLoaded', function() {
    console.log('DOMContentLoaded fired, calling initCounters...');
    initCounters();
  });
} else {
  console.log('DOM already loaded, calling initCounters immediately...');
  initCounters();
}

// Also try after a delay as fallback
setTimeout(function() {
  console.log('=== FALLBACK: Checking counters after 2 seconds ===');
  const section = document.getElementById('statsSection');
  if (section) {
    const counters = section.querySelectorAll('.stat-number');
    console.log('Fallback: Found', counters.length, 'counters');
    counters.forEach(function(counter, index) {
      const target = parseInt(counter.getAttribute('data-target')) || 0;
      counter.textContent = target.toString();
      console.log('Fallback: Set counter', index + 1, 'to', target);
    });
  }
}, 2000);

// Parallax effect for hero image
window.addEventListener('scroll', () => {
  const scrolled = window.pageYOffset;
  const heroImage = document.getElementById('heroImage');
  if (heroImage) {
    const rate = scrolled * 0.5;
    heroImage.style.transform = `translateY(${rate}px)`;
  }
});

// Smooth scroll for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      target.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }
  });
});

// Initialize everything when DOM is ready
function initAll() {
  // Initialize theme
  const savedTheme = localStorage.getItem('theme') || 'light';
  setTheme(savedTheme);
  
  // Initialize language - MUST be after DOM is ready
  let savedLang = localStorage.getItem('language');
  if (!savedLang) {
    savedLang = 'ro';
    localStorage.setItem('language', 'ro');
  }
  if (typeof window.setLanguage === 'function') {
    window.setLanguage(savedLang);
  }
  
  // Initialize mobile menu
  initMobileMenu();
  
  // Initialize counters
  if (typeof initCounters === 'function') {
    console.log('Calling initCounters from initAll...');
    initCounters();
  } else {
    console.error('initCounters function not found!');
  }
  
  // Scroll animations, counter animation, parallax and smooth scroll are auto-initialized above
}

// Initialize on DOM ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initAll);
} else {
  initAll();
}

// Initialize language on page load - AFTER all functions are defined
// This is a backup in case the head script didn't work
try {
  let savedLang = localStorage.getItem('language');
  if (!savedLang) {
    savedLang = 'ro';
    localStorage.setItem('language', 'ro');
  }
  if (typeof window.setLanguage === 'function') {
    window.setLanguage(savedLang);
  }
} catch (error) {
  // Silent error handling
}

// FINAL TEST: Set counters directly at the very end - SIMPLE VERSION
(function() {
  console.log('=== FINAL TEST STARTED ===');
  setTimeout(function() {
    console.log('=== TIMEOUT FIRED ===');
    var section = document.getElementById('statsSection');
    console.log('Section element:', section);
    if (section) {
      var counters = section.querySelectorAll('.stat-number');
      console.log('Found counters:', counters.length);
      for (var i = 0; i < counters.length; i++) {
        var target = parseInt(counters[i].getAttribute('data-target')) || 0;
        counters[i].textContent = target.toString();
        console.log('Counter', (i+1), 'set to:', target);
      }
    } else {
      console.error('Section NOT found!');
    }
  }, 2000);
})();

</script>

