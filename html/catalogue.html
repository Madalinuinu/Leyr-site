<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Leyr. — Produsele | Figurine 3D, Cercei, Bijuterii</title>
<link rel="icon" href="../imgages/logo3.ico">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../css/catalogue.css">
<script>
// Theme toggle function - MUST be defined in head before body loads
window.toggleTheme = function() {
  console.log('=== toggleTheme called (head - catalogue) ===');
  const currentTheme = localStorage.getItem('theme') || 'light';
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  localStorage.setItem('theme', newTheme);
  document.documentElement.setAttribute('data-theme', newTheme);
  
  const themeToggle = document.getElementById('themeToggle');
  if (themeToggle) {
    const sunIcon = themeToggle.querySelector('.sun-icon');
    const moonIcon = themeToggle.querySelector('.moon-icon');
    if (sunIcon && moonIcon) {
      // Show the opposite icon (the one you can switch to)
      if (newTheme === 'dark') {
        // Theme is dark, show sun icon (to switch to light)
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
        themeToggle.classList.remove('dark-active');
      } else {
        // Theme is light, show moon icon (to switch to dark)
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
        themeToggle.classList.add('dark-active');
      }
    }
  }
};
</script>
</head>
<body>

<header>
  <div class="header-logo" onclick="window.location.href='index.html'">
    <img src="../imgages/logo1.png" alt="Leyr.">
  </div>
  <nav id="navMenu">
    <a href="index.html" data-i18n="navHome">Acasă</a>
    <a href="catalogue.html" data-i18n="navProducts">Produse</a>
    <a href="services.html" data-i18n="navServices">Servicii</a>
    <a href="index.html#aboutUs" data-i18n="navAbout">Despre Noi</a>
    <a href="contact.html" data-i18n="navContact">Contactează-ne</a>
  </nav>
  <div class="header-actions">
    <a href="cart.html" class="header-icon-btn" id="cartToggle" aria-label="Coș">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="9" cy="21" r="1"></circle>
        <circle cx="20" cy="21" r="1"></circle>
        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
      </svg>
      <span class="cart-badge" id="cartBadge">0</span>
    </a>
    <button class="header-icon-btn" id="searchToggle" aria-label="Search">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
    </button>
  </div>
</header>

<section class="search-filter-section">
  <div class="search-filter-container">
    <div class="search-bar-wrapper">
      <input type="text" id="searchInput" class="search-input" placeholder="Caută produse..." data-i18n-placeholder="searchPlaceholder">
      <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
    </div>
    <div class="category-filter-wrapper">
      <select id="categoryFilter" class="category-select" data-i18n-label="categoryLabel">
        <option value="all" data-i18n="categoryAll">Toate Categoriile</option>
        <option value="figurine" data-i18n="categoryFigurine">Figurine 3D</option>
        <option value="cercei" data-i18n="categoryEarrings">Cercei 3D</option>
        <option value="bijuterii" data-i18n="categoryJewelry">Bijuterii 3D</option>
        <option value="personalizate" data-i18n="categoryCustom">Obiecte Personalizate</option>
      </select>
    </div>
  </div>
</section>

<div class="no-results" id="noResults" data-i18n="noResults">Nu s-au găsit produse.</div>

<!-- Most Selled Section -->
<section class="most-selled-section">
  <div class="most-selled-wrapper">
    <h2 class="most-selled-title" data-i18n="mostSelled">Cele Mai Vândute</h2>
    <div class="products-container most-selled-container" id="mostSelledContainer">
    <!-- Custom Product Card - Special Design -->
    <div class="product-card custom-product-card" data-category="personalizate" data-most-selled="true">
      <div class="custom-product-badge" data-i18n="customBadge">CUSTOM</div>
      <div class="custom-product-icon">
        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 2v20M2 12h20"></path>
        </svg>
      </div>
      <h3 data-i18n="customProductTitle">Produs Custom</h3>
      <p class="product-description" data-i18n="customProductDesc">Ai o idee unică? Creează-ți propriul produs 3D personalizat! Contactează-ne pe WhatsApp pentru a discuta despre proiectul tău.</p>
      <a href="https://wa.me/40712345678?text=Bună!%20Aș%20dori%20să%20comand%20un%20produs%20custom%203D." target="_blank" class="custom-product-whatsapp-btn" data-i18n="customProductBtn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
        </svg>
        <span data-i18n="customProductBtn">Comandă pe WhatsApp</span>
      </a>
    </div>
    <div class="product-card" data-category="figurine" data-most-selled="true">
      <img src="../imgages/Studio Session-039_1024px.jpg" alt="Dragon Figurine">
      <h3>Dragon Figurine</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Figurină dragon detaliată, printare 3D de înaltă calitate</p>
      <div class="product-price">299 RON</div>
      <button onclick="addToCart('dragon-figurine', 299)">Adaugă în Coș</button>
    </div>
    <div class="product-card" data-category="cercei" data-most-selled="true">
      <img src="../imgages/Studio Session-046_1024px.jpg" alt="Floral Earrings">
      <h3>Cercei Floral</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Cercei cu design floral, materiale premium</p>
      <div class="product-price">149 RON</div>
      <button onclick="addToCart('floral-earrings', 149)">Adaugă în Coș</button>
    </div>
    <div class="product-card" data-category="bijuterii" data-most-selled="true">
      <img src="../imgages/Studio Session-045_1024px.jpg" alt="Geometric Necklace">
      <h3>Colier Geometric</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Colier cu design geometric modern</p>
      <div class="product-price">199 RON</div>
      <button onclick="addToCart('geometric-necklace', 199)">Adaugă în Coș</button>
    </div>
    </div>
  </div>
</section>

<!-- All Products Section -->
<section class="all-products-section">
  <div class="products-container" id="productsContainer">
    <div class="product-card" data-category="figurine">
      <img src="../imgages/Studio Session-044_1024px.jpg" alt="Fantasy Character">
      <h3>Personaj Fantasy</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Personaj fantasy detaliat, printare 3D profesională</p>
      <div class="product-price">279 RON</div>
      <button onclick="addToCart('fantasy-character', 279)">Adaugă în Coș</button>
    </div>
    <div class="product-card" data-category="cercei">
      <img src="../imgages/Studio Session-041_1024px.jpg" alt="Minimalist Earrings">
      <h3>Cercei Minimalist</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Cercei cu design minimalist, elegante și moderne</p>
      <div class="product-price">129 RON</div>
      <button onclick="addToCart('minimalist-earrings', 129)">Adaugă în Coș</button>
    </div>
    <div class="product-card" data-category="bijuterii">
      <img src="../imgages/Studio Session-038_1024px.jpg" alt="Abstract Ring">
      <h3>Inel Abstract</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Inel cu design abstract, unic și modern</p>
      <div class="product-price">179 RON</div>
      <button onclick="addToCart('abstract-ring', 179)">Adaugă în Coș</button>
    </div>
    <div class="product-card" data-category="personalizate">
      <img src="../imgages/Studio Session-037_1024px.jpg" alt="Custom Phone Case">
      <h3>Husă Telefon Personalizată</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Husă telefon personalizată după designul tău</p>
      <div class="product-price">89 RON</div>
      <button onclick="addToCart('custom-phone-case', 89)">Adaugă în Coș</button>
    </div>
    <div class="product-card" data-category="figurine">
      <img src="../imgages/Studio Session-036_1024px.jpg" alt="Animal Figurine">
      <h3>Figurină Animal</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Figurină animal realistă, perfectă pentru decor</p>
      <div class="product-price">229 RON</div>
      <button onclick="addToCart('animal-figurine', 229)">Adaugă în Coș</button>
    </div>
    <div class="product-card" data-category="cercei">
      <img src="../imgages/Studio Session-035_1024px.jpg" alt="Statement Earrings">
      <h3>Cercei Statement</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Cercei statement, bold și expresivi</p>
      <div class="product-price">169 RON</div>
      <button onclick="addToCart('statement-earrings', 169)">Adaugă în Coș</button>
    </div>
    <div class="product-card" data-category="bijuterii">
      <img src="../imgages/Studio Session-033_1024px.jpg" alt="Bracelet Set">
      <h3>Set Brățări</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Set de brățări coordonate, design modern</p>
      <div class="product-price">249 RON</div>
      <button onclick="addToCart('bracelet-set', 249)">Adaugă în Coș</button>
    </div>
    <div class="product-card" data-category="personalizate">
      <img src="../imgages/Studio Session-032_1024px.jpg" alt="Custom Keychain">
      <h3>Cheiță Personalizată</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Cheiță personalizată cu designul tău</p>
      <div class="product-price">59 RON</div>
      <button onclick="addToCart('custom-keychain', 59)">Adaugă în Coș</button>
    </div>
    <div class="product-card" data-category="figurine">
      <img src="../imgages/Studio Session-031_1024px.jpg" alt="Sci-Fi Model">
      <h3>Model Sci-Fi</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Model science-fiction detaliat, perfect pentru colecții</p>
      <div class="product-price">319 RON</div>
      <button onclick="addToCart('sci-fi-model', 319)">Adaugă în Coș</button>
    </div>
    <div class="product-card" data-category="cercei">
      <img src="../imgages/Studio Session-030_1024px.jpg" alt="Vintage Earrings">
      <h3>Cercei Vintage</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Cercei cu design vintage, elegante și atemporale</p>
      <div class="product-price">139 RON</div>
      <button onclick="addToCart('vintage-earrings', 139)">Adaugă în Coș</button>
    </div>
    <div class="product-card" data-category="bijuterii">
      <img src="../imgages/Studio Session-029_1024px.jpg" alt="Pendant Necklace">
      <h3>Colier cu Pendant</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Colier cu pendant elegant, design clasic</p>
      <div class="product-price">189 RON</div>
      <button onclick="addToCart('pendant-necklace', 189)">Adaugă în Coș</button>
    </div>
    <div class="product-card" data-category="personalizate">
      <img src="../imgages/Studio Session-028_1024px.jpg" alt="Custom Desk Organizer">
      <h3>Organizator Birou</h3>
      <p style="font-size:0.9rem; color:#666; margin:10px 0;">Organizator birou personalizat, funcțional și elegant</p>
      <div class="product-price">159 RON</div>
      <button onclick="addToCart('desk-organizer', 159)">Adaugă în Coș</button>
    </div>
  </div>
</section>

<section class="contact-section">
  <div class="contact-container">
    <h2 data-i18n="contactTitle">Contactează-ne</h2>
    <div class="contact-info">
      <a href="https://www.instagram.com/leyr.ro?igsh=MTk0bXoxMmxvdmFucg==" target="_blank" class="contact-link">
        <span class="contact-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="2" width="20" height="20" rx="5" stroke="currentColor" stroke-width="2" fill="none"/>
            <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2" fill="none"/>
            <circle cx="17.5" cy="6.5" r="1.5" fill="currentColor"/>
          </svg>
        </span>
        <span>Instagram</span>
      </a>
      <a href="https://wa.me/40771728217" target="_blank" class="contact-link">
        <span class="contact-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
          </svg>
        </span>
        <span>WhatsApp</span>
      </a>
      <a href="https://www.facebook.com/share/1FnburaNfb/" target="_blank" class="contact-link">
        <span class="contact-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
        </span>
        <span>Facebook</span>
      </a>
      <a href="https://www.tiktok.com/@leyr.studio?_r=1&_t=ZN-91kh1RMaZC2" target="_blank" class="contact-link">
        <span class="contact-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
          </svg>
        </span>
        <span>TikTok</span>
      </a>
    </div>
  </div>
</section>

<!-- Floating WhatsApp Button for Custom Product -->
<a href="https://wa.me/40771728217?text=Bună!%20Aș%20dori%20să%20comand%20un%20produs%20custom." target="_blank" class="whatsapp-float" aria-label="Comandă produs custom pe WhatsApp">
  <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
  </svg>
  <span class="whatsapp-tooltip" data-i18n="whatsappTooltip">Produs Custom</span>
</a>

<footer>
  <p>&copy; 2025 Leyr. All rights reserved.</p>
</footer>

<script>
// Language translations for catalogue page
const translations = {
  ro: {
    navHome: 'Acasă',
    navProducts: 'Produse',
    navServices: 'Servicii',
    navContact: 'Contactează-ne',
    navCart: 'Coș',
    pageTitle: 'Produsele',
    product1Title: 'Figurine 3D',
    product1Desc: 'Figurine personalizate pentru colecții, jocuri și decor',
    product2Title: 'Cercei 3D',
    product2Desc: 'Cercei unici și personalizați din materiale premium',
    product3Title: 'Bijuterii 3D',
    product3Desc: 'Bijuterii moderne și accesorii personalizate',
    product4Title: 'Obiecte Personalizate',
    product4Desc: 'Obiecte 3D personalizate după designul tău',
    viewProducts: 'Vezi Produse',
    contactTitle: 'Contactează-ne',
    searchPlaceholder: 'Caută produse...',
    categoryAll: 'Toate Categoriile',
    categoryFigurine: 'Figurine 3D',
    categoryEarrings: 'Cercei 3D',
    categoryJewelry: 'Bijuterii 3D',
    categoryCustom: 'Obiecte Personalizate',
    noResults: 'Nu s-au găsit produse.',
    mostSelled: 'Cele Mai Vândute',
    allProducts: 'Toate Produsele',
    customBadge: 'CUSTOM',
    customProductTitle: 'Produs Custom',
    customProductDesc: 'Ai o idee unică? Creează-ți propriul produs 3D personalizat! Contactează-ne pe WhatsApp pentru a discuta despre proiectul tău.',
    customProductBtn: 'Comandă pe WhatsApp',
    whatsappTooltip: 'Produs Custom',
    notificationTitle: 'Succes!',
    notificationMessage: 'Produs adăugat în coș!'
  },
  en: {
    navHome: 'Home',
    navProducts: 'Our Products',
    navServices: 'Our Services',
    navContact: 'Contact Us',
    navCart: 'Cart',
    pageTitle: 'Our Products',
    product1Title: '3D Figurines',
    product1Desc: 'Custom figurines for collections, games and decoration',
    product2Title: '3D Earrings',
    product2Desc: 'Unique and custom earrings from premium materials',
    product3Title: '3D Jewelry',
    product3Desc: 'Modern jewelry and custom accessories',
    product4Title: 'Custom Objects',
    product4Desc: 'Custom 3D objects according to your design',
    viewProducts: 'View Products',
    contactTitle: 'Contact Us',
    searchPlaceholder: 'Search products...',
    categoryAll: 'All Categories',
    categoryFigurine: '3D Figurines',
    categoryEarrings: '3D Earrings',
    categoryJewelry: '3D Jewelry',
    categoryCustom: 'Custom Objects',
    noResults: 'No products found.',
    mostSelled: 'Most Selled',
    allProducts: 'All Products',
    customBadge: 'CUSTOM',
    customProductTitle: 'Custom Product',
    customProductDesc: 'Have a unique idea? Create your own personalized 3D product! Contact us on WhatsApp to discuss your project.',
    customProductBtn: 'Order on WhatsApp',
    whatsappTooltip: 'Custom Product',
    notificationTitle: 'Success!',
    notificationMessage: 'Product added to cart!'
  }
};

// Language toggle function
window.toggleLanguage = function() {
  // Force Romanian language
  localStorage.setItem('language', 'ro');
  setLanguage('ro');
};

function setLanguage(lang) {
  localStorage.setItem('language', lang);
  document.documentElement.setAttribute('lang', lang);
  
  const languageToggleText = document.getElementById('languageToggleText');
  if (languageToggleText) {
    // Show the opposite language (the one you can switch to)
    const oppositeLang = lang === 'ro' ? 'EN' : 'RO';
    languageToggleText.textContent = oppositeLang;
  }
  
  updatePageContent(lang);
}

function updatePageContent(lang) {
  const t = translations[lang];
  if (!t) return;
  
  // Update all elements with data-i18n attribute
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (t[key]) {
      el.textContent = t[key];
    }
  });
  
  // Update placeholder attributes
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    const key = el.getAttribute('data-i18n-placeholder');
    if (t[key]) {
      el.placeholder = t[key];
    }
  });
  
  // Update select options
  const categoryFilter = document.getElementById('categoryFilter');
  if (categoryFilter) {
    categoryFilter.querySelectorAll('option').forEach(option => {
      const key = option.getAttribute('data-i18n');
      if (key && t[key]) {
        option.textContent = t[key];
      }
    });
  }
  
  // Update page title
  // Always Romanian
  document.title = 'Leyr. — Produsele | Figurine 3D, Cercei, Bijuterii';
}

const mobileMenuToggle = document.getElementById('mobileMenuToggle');
const navMenu = document.getElementById('navMenu');

if (mobileMenuToggle) {
  mobileMenuToggle.addEventListener('click', () => {
    navMenu.classList.toggle('active');
  });
  
  const navLinks = navMenu.querySelectorAll('a');
  navLinks.forEach(link => {
    link.addEventListener('click', () => {
      if (window.innerWidth <= 768) {
        navMenu.classList.remove('active');
      }
    });
  });
}

// Theme toggle function
window.toggleTheme = function() {
  console.log('=== toggleTheme called (catalogue) ===');
  const currentTheme = localStorage.getItem('theme') || 'light';
  console.log('Current theme:', currentTheme);
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  console.log('Switching to theme:', newTheme);
  setTheme(newTheme);
};

// Theme function
function setTheme(theme) {
  console.log('=== setTheme called with:', theme, '(catalogue) ===');
  localStorage.setItem('theme', theme);
  console.log('Theme saved to localStorage:', theme);
  
  document.documentElement.setAttribute('data-theme', theme);
  console.log('data-theme attribute set on html element:', document.documentElement.getAttribute('data-theme'));
  
  const themeToggle = document.getElementById('themeToggle');
  console.log('Looking for themeToggle element...');
  if (themeToggle) {
    console.log('Found themeToggle element:', themeToggle);
    const sunIcon = themeToggle.querySelector('.sun-icon');
    const moonIcon = themeToggle.querySelector('.moon-icon');
    console.log('Sun icon found:', !!sunIcon);
    console.log('Moon icon found:', !!moonIcon);
    
    if (sunIcon && moonIcon) {
      // Show the opposite icon (the one you can switch to)
      if (theme === 'dark') {
        // Theme is dark, show sun icon (to switch to light)
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
        themeToggle.classList.remove('dark-active');
        console.log('Theme set to dark - showing sun icon (can switch to light)');
      } else {
        // Theme is light, show moon icon (to switch to dark)
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
        themeToggle.classList.add('dark-active');
        console.log('Theme set to light - showing moon icon (can switch to dark)');
      }
    } else {
      console.error('Sun or moon icon NOT found!');
      console.log('Available children:', Array.from(themeToggle.children).map(c => c.tagName + (c.className ? '.' + c.className : '')));
    }
  } else {
    console.error('themeToggle element NOT found!');
  }
  console.log('=== setTheme finished (catalogue) ===');
}

// Initialize language on page load
let savedLang = localStorage.getItem('language');
if (!savedLang) {
  savedLang = 'ro';
  localStorage.setItem('language', 'ro');
}
setLanguage(savedLang);

// Update cart badge count
function updateCartBadge() {
  const cartBadge = document.getElementById('cartBadge');
  if (!cartBadge) return;
  
  try {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const totalItems = cart.reduce((sum, item) => sum + (item.quantity || 1), 0);
    
    if (totalItems > 0) {
      cartBadge.textContent = totalItems;
      cartBadge.style.display = 'flex';
    } else {
      cartBadge.style.display = 'none';
    }
  } catch (error) {
    console.error('Error updating cart badge:', error);
    cartBadge.style.display = 'none';
  }
}

// Initialize theme on page load
const savedTheme = localStorage.getItem('theme') || 'light';
setTheme(savedTheme);

// Initialize cart badge on page load
updateCartBadge();

// Listen for storage changes to sync language and theme across all open pages
window.addEventListener('storage', function(e) {
  if (e.key === 'language') {
    const newLang = e.newValue || 'ro';
    setLanguage(newLang);
  }
  if (e.key === 'theme') {
    const newTheme = e.newValue || 'light';
    setTheme(newTheme);
  }
  if (e.key === 'cart') {
    updateCartBadge();
  }
});

// Also check cart on page focus (for same-tab updates)
window.addEventListener('focus', updateCartBadge);

// Add to Cart Function
function addToCart(productId, price) {
  // Get existing cart from localStorage
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  
  // Normalize existing cart items to use qty
  cart = cart.map(item => {
    if (item.quantity !== undefined && item.qty === undefined) {
      item.qty = item.quantity;
      delete item.quantity;
    }
    return item;
  });
  
  // Check if product already exists in cart
  const existingProduct = cart.find(item => item.id === productId);
  
  if (existingProduct) {
    // Increment quantity - use qty if exists, otherwise quantity
    const currentQty = existingProduct.qty !== undefined ? existingProduct.qty : (existingProduct.quantity || 1);
    existingProduct.qty = currentQty + 1;
    // Remove old quantity property if it exists
    if (existingProduct.quantity !== undefined) {
      delete existingProduct.quantity;
    }
  } else {
    // Get product name from the card
    const productCard = event.target.closest('.product-card');
    const productName = productCard.querySelector('h3')?.textContent || 'Produs';
    
    cart.push({
      id: productId,
      name: productName,
      price: price,
      qty: 1
    });
  }
  
  // Save to localStorage
  localStorage.setItem('cart', JSON.stringify(cart));
  
  // Update cart badge
  updateCartBadge();
  
  // Trigger storage event for other tabs
  window.dispatchEvent(new StorageEvent('storage', {
    key: 'cart',
    newValue: JSON.stringify(cart)
  }));
  
  // Show confirmation
  showNotification();
}

// Shuffle Products Randomly
function shuffleProducts() {
  const productsContainer = document.getElementById('productsContainer');
  const mostSelledContainer = document.getElementById('mostSelledContainer');
  
  if (!productsContainer) return;
  
  // Get all products from both sections
  const allProducts = Array.from(productsContainer.querySelectorAll('.product-card'));
  const mostSelledProducts = mostSelledContainer ? Array.from(mostSelledContainer.querySelectorAll('.product-card')) : [];
  
  // Combine all products (excluding most selled from shuffle, they stay in their section)
  const products = [...allProducts];
  
  // Fisher-Yates shuffle algorithm
  for (let i = products.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [products[i], products[j]] = [products[j], products[i]];
  }
  
  // Re-append shuffled products
  products.forEach(product => {
    productsContainer.appendChild(product);
  });
}

// Search and Filter Functionality
function filterProducts() {
  const searchInput = document.getElementById('searchInput');
  const categoryFilter = document.getElementById('categoryFilter');
  const allProductCards = document.querySelectorAll('#productsContainer .product-card');
  const mostSelledSection = document.querySelector('.most-selled-section');
  const mostSelledCards = document.querySelectorAll('#mostSelledContainer .product-card');
  const noResults = document.getElementById('noResults');
  
  if (!searchInput || !categoryFilter) return;
  
  const searchTerm = searchInput.value.toLowerCase().trim();
  const selectedCategory = categoryFilter.value;
  
  let visibleCount = 0;
  
  // Show or hide Most Selled section based on category selection
  if (mostSelledSection) {
    if (selectedCategory === 'all') {
      // Show Most Selled section when "all" is selected
      mostSelledSection.style.display = 'block';
      // Show all most selled products
      mostSelledCards.forEach(card => {
        card.classList.remove('hidden');
      });
    } else {
      // Hide entire Most Selled section when a specific category is selected
      mostSelledSection.style.display = 'none';
    }
  }
  
  // Filter all products (not most selled)
  allProductCards.forEach(card => {
    const cardCategory = card.getAttribute('data-category');
    const cardTitle = card.querySelector('h3')?.textContent.toLowerCase() || '';
    const cardDesc = card.querySelector('p')?.textContent.toLowerCase() || '';
    
    // Check if card matches search term
    const matchesSearch = searchTerm === '' || 
      cardTitle.includes(searchTerm) || 
      cardDesc.includes(searchTerm);
    
    // Check if card matches category filter
    const matchesCategory = selectedCategory === 'all' || cardCategory === selectedCategory;
    
    // Show or hide card
    if (matchesSearch && matchesCategory) {
      card.classList.remove('hidden');
      visibleCount++;
    } else {
      card.classList.add('hidden');
    }
  });
  
  // Show or hide no results message
  // Only count most selled products if the section is visible
  const mostSelledVisible = selectedCategory === 'all' ? 
    Array.from(mostSelledCards).filter(card => !card.classList.contains('hidden')).length : 0;
  const totalVisible = visibleCount + mostSelledVisible;
  
  if (totalVisible === 0) {
    noResults.classList.add('show');
  } else {
    noResults.classList.remove('show');
  }
}

  // Add event listeners for search and filter
  document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    const categoryFilter = document.getElementById('categoryFilter');
    
    if (searchInput) {
      searchInput.addEventListener('input', filterProducts);
    }
    
    if (categoryFilter) {
      categoryFilter.addEventListener('change', function() {
        // Shuffle products when "all" category is selected
        if (this.value === 'all') {
          shuffleProducts();
        }
        filterProducts();
      });
    }
    
    // Shuffle products on page load when category is "all"
    if (categoryFilter && categoryFilter.value === 'all') {
      shuffleProducts();
    }
    
    // Initial filter to ensure everything is set up correctly
    filterProducts();
  });
</script>

<!-- Notification Container -->
<div class="notification-container" id="notificationContainer"></div>

<script>
// Notification System
function showNotification(type = 'success', title = null, message = null) {
  const container = document.getElementById('notificationContainer');
  if (!container) return;
  
  // Get current language
  const lang = localStorage.getItem('language') || 'ro';
  const t = translations[lang] || translations['ro'];
  
  // Use provided title/message or defaults from translations
  const notificationTitle = title || t.notificationTitle || 'Succes!';
  const notificationMessage = message || t.notificationMessage || 'Produs adăugat în coș!';
  
  // Create notification element
  const notification = document.createElement('div');
  notification.className = `notification-toast ${type}`;
  
  notification.innerHTML = `
    <div class="notification-icon">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M20 6L9 17l-5-5"/>
      </svg>
    </div>
    <div class="notification-content">
      <div class="notification-title">${notificationTitle}</div>
      <div class="notification-message">${notificationMessage}</div>
    </div>
    <button class="notification-close" aria-label="Close notification">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  `;
  
  // Add to container
  container.appendChild(notification);
  
  // Close button functionality
  const closeBtn = notification.querySelector('.notification-close');
  closeBtn.addEventListener('click', () => {
    removeNotification(notification);
  });
  
  // Auto-remove after 3 seconds
  setTimeout(() => {
    removeNotification(notification);
  }, 3000);
  
  // Trigger animation
  requestAnimationFrame(() => {
    notification.style.animation = 'slideInRight 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
  });
}

function removeNotification(notification) {
  if (!notification) return;
  
  notification.classList.add('hiding');
  
  setTimeout(() => {
    if (notification.parentNode) {
      notification.parentNode.removeChild(notification);
    }
  }, 300);
}
</script>

</body>
</html>